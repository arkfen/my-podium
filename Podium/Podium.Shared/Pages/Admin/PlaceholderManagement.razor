@page "/admin/series"
@page "/admin/seasons"
@page "/admin/competitors"
@page "/admin/events"
@page "/admin/results"
@using Podium.Shared.Services.State
@inject AdminStateService AdminState
@inject NavigationManager Navigation

<PageTitle>@PageTitle - Admin</PageTitle>

<div class="admin-container">
    <div class="admin-header">
        <h1>[COMING SOON] @PageTitle</h1>
        <p>This feature is coming soon!</p>
    </div>

    <div class="admin-placeholder">
        <p>This management page will allow you to:</p>
        <ul>
            @foreach (var feature in Features)
            {
                <li>@feature</li>
            }
        </ul>
        <button class="btn btn-secondary" @onclick="GoBack">&larr; Back to Dashboard</button>
    </div>
</div>

@code {
    private string PageTitle => Navigation.Uri.Contains("/series") ? "Manage Series" :
                                Navigation.Uri.Contains("/seasons") ? "Manage Seasons" :
                                Navigation.Uri.Contains("/competitors") ? "Manage Competitors" :
                                Navigation.Uri.Contains("/events") ? "Manage Events" :
                                Navigation.Uri.Contains("/results") ? "Manage Results" :
                                "Admin Management";

    private List<string> Features => Navigation.Uri.Contains("/series") ? new() { "Create, edit, and delete series", "Assign series to disciplines", "Toggle series active status" } :
                                     Navigation.Uri.Contains("/seasons") ? new() { "Create, edit, and delete seasons", "Set active season per series", "Configure season dates" } :
                                     Navigation.Uri.Contains("/competitors") ? new() { "Create, edit, and delete competitors", "Link competitors to seasons", "Manage driver/team information" } :
                                     Navigation.Uri.Contains("/events") ? new() { "Create, edit, and delete events", "Configure event dates and locations", "Set event status" } :
                                     Navigation.Uri.Contains("/results") ? new() { "Enter event results (podium finishers)", "Update existing results", "Trigger points calculation" } :
                                     new();

    protected override async Task OnInitializedAsync()
    {
        if (!AdminState.IsInitialized)
        {
            await AdminState.InitializeAsync();
        }

        if (!AdminState.IsAdmin)
        {
            Navigation.NavigateTo("/admin");
        }
    }

    private void GoBack()
    {
        Navigation.NavigateTo("/admin");
    }
}
